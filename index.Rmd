---
title: "index"
output: html_document
date: "2025-06-25"
---

```{r}
library(plotly)

```

```{r}
theoretical_lot_audits = read.csv(file = "data/assesment.csv")
```


**CLEAN DATA**

```{r}
# this represents all of the rows where there is no value in the adjusted pieces column. I chose to use this over null values in the dates because i wanted to make sure that the empty cells in adjusted pieces that corresponded to an audit were because the initial_stock - final_count was 0.
theoretical_lot_audits[which(theoretical_lot_audits$Adjusted..Pcs == ""), ]

```

```{r}

# this shows that indeed all of the null values in adjusted_pcs where there was an audit was because the adjustment was 0
null_adjusted_audits = theoretical_lot_audits[which(theoretical_lot_audits$Adjusted..Pcs == "" & theoretical_lot_audits$System.User != ""), ]

null_adjusted_audits

null_adjusted_audits$Initial.Stock.Pcs - null_adjusted_audits$Final.Count.Pcs


```

```{r}

# Ill replace the null values with 0
adjusted_pc_null_index = which(theoretical_lot_audits$Adjusted..Pcs == "" & theoretical_lot_audits$System.User != "")

theoretical_lot_audits$Adjusted..Pcs[theoretical_lot_audits$Adjusted..Pcs == "" & theoretical_lot_audits$System.User != ""] = rep(0, 19)

```

```{r}
# new data frame with 0 instead of null values
theoretical_lot_audits[1:20, ] # first 20 rows
```
```{r}
# this shows that there is still an issue with the data as there is a "|" where there shoudl eb a number
unique(theoretical_lot_audits$Adjusted..Pcs[which(theoretical_lot_audits$Adjusted..Pcs != "")])

```
```{r}
# since this should be 0 like the null values lets fix it
theoretical_lot_audits[which(theoretical_lot_audits$Adjusted..Pcs == "|"), ]

```
```{r}
# fixed the data entry error
theoretical_lot_audits$Adjusted..Pcs[theoretical_lot_audits$Adjusted..Pcs == "|" & theoretical_lot_audits$System.User != ""] = c(0)

theoretical_lot_audits[which(theoretical_lot_audits$Lot. == "Lot2485"), ]

```

###**DATA OBSERVATIONS**

#####Total Number of  Unique Lots

```{r}
# look for duplicate lots
duplicates = theoretical_lot_audits$Lot.[duplicated(theoretical_lot_audits$Lot.)]

duplicates[1:20] # rest are also null
```



```{r}
# there are 6 repeat lots
duplicated_lots = duplicates[which(duplicates != "")]
duplicated_lots
```

```{r}
# number of total lots - number of duplicate lots
num_unique_lots = length(theoretical_lot_audits$Lot.[which(theoretical_lot_audits$Lot. != "")]) - length(duplicated_lots)

# number of unique lots
num_unique_lots

```



Unique Lots Audited (# & %)


- what year has the most/least amount of lots audited
- what months/year has the most accurate amount of lots audited

```{r}
# every audited lot
audited_lots_df = theoretical_lot_audits[which(theoretical_lot_audits$Adjusted..Pcs != ""), ]

audited_lots_df[1:20, ] # first 20 rows
```

```{r}
# duplicate audited lots
audited_duplicates = audited_lots_df$Lot.[duplicated(audited_lots_df$Lot.)]

audited_duplicates
```

```{r}
# number of unique audited lots
num_unique_audited_lots = dim(audited_lots_df)[1] - length(audited_duplicates)
num_unique_audited_lots
```

```{r}
# percentage of unique lots audited
(num_unique_audited_lots / num_unique_lots) * 100
```



Unique Lots Remaining to be Audited (# & %)


```{r}
# every lot that isn't audited
not_audited_lots_df = theoretical_lot_audits[which(theoretical_lot_audits$Adjusted..Pcs == "" & theoretical_lot_audits$Lot. != "" ), ]

head(not_audited_lots_df) #shows first 6 rows

```

```{r}
# shows if there are any duplicate not audited lots

not_audited_duplicates = not_audited_lots_df$Lot.[duplicated(not_audited_lots_df$Lot.)]

not_audited_duplicates

```

```{r}
# since there are no duplicates we can use just the dimensions of the data frame

# number of unique lots that aren't audited
dim(not_audited_lots_df)[1] 
```
```{r}
# percentage of unique lots not yet audited

(dim(not_audited_lots_df)[1]  / num_unique_lots) * 100
```







Total Adjustments (pcs) (# & %)

```{r}
# this includes duplicate lots since we're looking for total not unique

# total number of adjustments
total_num_adjustments = length(theoretical_lot_audits$Adjusted..Pcs[which(theoretical_lot_audits$Adjusted..Pcs != "")])

total_num_adjustments
```

```{r}
# where the data stops
last_data_index = which(theoretical_lot_audits$Adjusted..Pcs == "" & theoretical_lot_audits$Lot. == "")[1] - 1


# because of the way that I cleaned my data, percentage adjusted is the same as percentage of lots audited

# percentage of adjustments made
(total_num_adjustments / dim(theoretical_lot_audits[1:last_data_index, ])[1]) * 100

```


```{r}
# theoretical_lot_audits$Adjusted..Pcs[which(theoretical_lot_audits$Adjusted..Pcs != "")]
# length(theoretical_lot_audits$Adjusted..Pcs[which(theoretical_lot_audits$Adjusted..Pcs != "")])

unique(theoretical_lot_audits$Adjusted..Pcs[which(theoretical_lot_audits$Adjusted..Pcs != "")])

sum(as.numeric((theoretical_lot_audits$Adjusted..Pcs[which(theoretical_lot_audits$Adjusted..Pcs != "")])))


tab_x = table(as.numeric((theoretical_lot_audits$Adjusted..Pcs[which(theoretical_lot_audits$Adjusted..Pcs != "")])))
tab_x
```
what percentage of initial anf final counts were accurate
```{r}


```




any other relevant insights
- what style had the most percentage of its inventory used?(pick top 5 and bottom 5)




```{r, eval=FALSE}
# 
# theoretical_lot_audits[which(grepl("2022$", theoretical_lot_audits$System.Entry.Date)), ]
# 
# x = unique(substr(theoretical_lot_audits$System.Entry.Date, nchar(theoretical_lot_audits$System.Entry.Date)-3, nchar(theoretical_lot_audits$System.Entry.Date)))
# 
# x



recieved_dates_w_years = theoretical_lot_audits[which(grepl("/",theoretical_lot_audits$Received.Date )), ]

recieved_dates_w_years



recieved_dates_without_years = theoretical_lot_audits[which(!grepl("/",theoretical_lot_audits$Received.Date )), ]

recieved_dates_without_years
# 
# 
# y = unique(substr(theoretical_lot_audits$Received.Date, nchar(theoretical_lot_audits$Received.Date)-3, nchar(theoretical_lot_audits$Received.Date)))
# 
# y
```














```{r}
# used excel pivot tables to find errors

# there appears to have been an audit where the admin did not enter their name or the system entry date
theoretical_lot_audits[which(theoretical_lot_audits$System.User == "" & theoretical_lot_audits$Adjusted..Pcs != ""), ]

```


```{r}

# fix data entry error for incorrect system entry date
theoretical_lot_audits[which(theoretical_lot_audits$System.Entry.Date == "5/31/0202"), ] 

theoretical_lot_audits$System.Entry.Date[theoretical_lot_audits$System.Entry.Date == "5/31/0202"] = "5/31/2022"

theoretical_lot_audits[2021, ]

```





